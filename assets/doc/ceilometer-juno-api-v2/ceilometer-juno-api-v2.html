<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>OpenStack Ceilometer Juno API V2</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="./jquery-ui-1.10.2.min.css" type="text/css" />
  <link rel="stylesheet" href="./xlstablefilter-1.0.1.css" type="text/css" />
  <link rel="stylesheet" href="./doc.css" type="text/css" />
</head>
<body>
<div id="header">
<h1 class="title">OpenStack Ceilometer Juno API V2</h1>
</div>
<div id="TOC">
<ul>
<li><a href="#event"><span class="toc-section-number">1</span> Event</a><ul>
<li><a href="#list-events"><span class="toc-section-number">1.1</span> List Events</a></li>
<li><a href="#get-event"><span class="toc-section-number">1.2</span> Get Event</a></li>
<li><a href="#list-event-types"><span class="toc-section-number">1.3</span> List Event Types</a></li>
<li><a href="#list-traits-description"><span class="toc-section-number">1.4</span> List Traits Description</a></li>
<li><a href="#list-traits"><span class="toc-section-number">1.5</span> List Traits</a></li>
</ul></li>
<li><a href="#capabilities"><span class="toc-section-number">2</span> Capabilities</a><ul>
<li><a href="#get-capabilities"><span class="toc-section-number">2.1</span> Get Capabilities</a></li>
</ul></li>
<li><a href="#resource"><span class="toc-section-number">3</span> Resource</a><ul>
<li><a href="#list-resources"><span class="toc-section-number">3.1</span> List Resources</a></li>
<li><a href="#get-resource"><span class="toc-section-number">3.2</span> Get Resource</a></li>
</ul></li>
<li><a href="#alarm"><span class="toc-section-number">4</span> Alarm</a><ul>
<li><a href="#alarm-model"><span class="toc-section-number">4.1</span> Alarm Model</a><ul>
<li><a href="#alarmthresholdrule-model"><span class="toc-section-number">4.1.1</span> AlarmThresholdRule Model</a></li>
<li><a href="#alarmcombinationrule-model"><span class="toc-section-number">4.1.2</span> AlarmCombinationRule Model</a></li>
<li><a href="#alarmtimeconstraint"><span class="toc-section-number">4.1.3</span> AlarmTimeConstraint</a></li>
</ul></li>
<li><a href="#create-alarm"><span class="toc-section-number">4.2</span> Create Alarm</a></li>
<li><a href="#list-alarms"><span class="toc-section-number">4.3</span> List Alarms</a></li>
<li><a href="#get-alarm"><span class="toc-section-number">4.4</span> Get Alarm</a></li>
</ul></li>
</ul>
</div>
<pre><code>Copyright (c) 2014, Huawei Technologies Co., Ltd
All rights reserved.

Author: ZhiQiang Fan &lt;aji.zqfan@gmail.com&gt;</code></pre>
<h1 id="event"><span class="header-section-number">1</span> Event</h1>
<h2 id="list-events"><span class="header-section-number">1.1</span> List Events</h2>
<table>
<thead>
<tr class="header">
<th align="left">REST VERB</th>
<th align="left">URI</th>
<th align="left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">GET</td>
<td align="left">/v2/events?q.field={field}&amp;q.op={operator}&amp;q.type={type}&amp;q.value={value}</td>
<td align="left">查询事件列表</td>
</tr>
</tbody>
</table>
<p>添加过滤条件，格式为q.field={field}&amp;q.op={operator}&amp;q.type={type}&amp;q.value={value}</p>
<p>你可以同时指定多个过滤条件，也可以一个也不指定，为了API能够快速响应，同时也为了减小系统压力，请尽量使用过滤条件进行精确查询</p>
<p>示例：查询系统上事件类型为compute.instance.delete.start的事件，为了方便举例，此处仅截取了响应体列表的一个元素，且对该元素进行了json格式化，实际返回的是纯文本。</p>
<p>curl -i -X GET -H 'X-Auth-Token: 56c50f283bb84ee28d29d77f35a3714d' -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'User-Agent: python-ceilometerclient' 'http://172.128.231.201:8777/v2/events?q.field=event_type&amp;q.op=eq&amp;q.type=&amp;q.value=compute.instance.delete.start'</p>
<pre class="sourceCode json"><code class="sourceCode json">[
    {
        <span class="dt">&quot;event_type&quot;</span>: <span class="st">&quot;compute.instance.delete.start&quot;</span>,
        <span class="dt">&quot;generated&quot;</span>: <span class="st">&quot;2014-12-28T22:50:53.113282&quot;</span>,
        <span class="dt">&quot;message_id&quot;</span>: <span class="st">&quot;a25935cb-9d74-4f2f-9c5e-5a162f022095&quot;</span>,
        <span class="dt">&quot;traits&quot;</span>: [
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;state&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;active&quot;</span>
            },
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;root_gb&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;0&quot;</span>
            },
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;user_id&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;2630d3c577df426bab9a4d9bfa986297&quot;</span>
            },
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;service&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;compute&quot;</span>
            },
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;disk_gb&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;0&quot;</span>
            },
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;instance_type&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;64m-ram&quot;</span>
            },
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;tenant_id&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;d1578b5392f744b68dd8ad23412a8cd4&quot;</span>
            },
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;ephemeral_gb&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;0&quot;</span>
            },
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;instance_type_id&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;6&quot;</span>
            },
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;vcpus&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;1&quot;</span>
            },
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;memory_mb&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;64&quot;</span>
            },
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;instance_id&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;5e7d8e95-a8a5-41ab-a1dc-c0fbbb9fa705&quot;</span>
            },
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;host&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;openstack&quot;</span>
            },
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;request_id&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;req-4b599fb8-0cc7-4980-9a61-5bd2c51d0ffb&quot;</span>
            },
            {
                <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;launched_at&quot;</span>,
                <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;datetime&quot;</span>,
                <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;2014-12-28T22:36:27&quot;</span>
            }
        ]
    }
]</code></pre>
<h2 id="get-event"><span class="header-section-number">1.2</span> Get Event</h2>
<table>
<thead>
<tr class="header">
<th align="left">REST VERB</th>
<th align="left">URI</th>
<th align="left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">GET</td>
<td align="left">/v2/events/{message_id}</td>
<td align="left">查询某事件</td>
</tr>
</tbody>
</table>
<p>注意，查询单个事件并不能比查询事件列表获取更详细的信息，但是有助于提高性能，减轻系统压力。</p>
<p>示例：为了方便举例，对响应体进行了json格式化，实际返回的是纯文本。</p>
<p>curl -i -X GET -H 'X-Auth-Token: d980626ab92c4a17b1fb69f1e6eddc06' -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'User-Agent: python-ceilometerclient' http://172.128.231.201:8777/v2/events/a25935cb-9d74-4f2f-9c5e-5a162f022095</p>
<pre class="sourceCode json"><code class="sourceCode json">{
    <span class="dt">&quot;event_type&quot;</span>: <span class="st">&quot;compute.instance.delete.start&quot;</span>,
    <span class="dt">&quot;generated&quot;</span>: <span class="st">&quot;2014-12-28T22:50:53.113282&quot;</span>,
    <span class="dt">&quot;message_id&quot;</span>: <span class="st">&quot;a25935cb-9d74-4f2f-9c5e-5a162f022095&quot;</span>,
    <span class="dt">&quot;traits&quot;</span>: [
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;state&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;active&quot;</span>
        },
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;root_gb&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;0&quot;</span>
        },
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;user_id&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;2630d3c577df426bab9a4d9bfa986297&quot;</span>
        },
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;service&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;compute&quot;</span>
        },
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;disk_gb&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;0&quot;</span>
        },
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;instance_type&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;64m-ram&quot;</span>
        },
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;tenant_id&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;d1578b5392f744b68dd8ad23412a8cd4&quot;</span>
        },
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;ephemeral_gb&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;0&quot;</span>
        },
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;instance_type_id&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;6&quot;</span>
        },
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;vcpus&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;1&quot;</span>
        },
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;memory_mb&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;64&quot;</span>
        },
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;instance_id&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;5e7d8e95-a8a5-41ab-a1dc-c0fbbb9fa705&quot;</span>
        },
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;host&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;openstack&quot;</span>
        },
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;request_id&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;req-4b599fb8-0cc7-4980-9a61-5bd2c51d0ffb&quot;</span>
        },
        {
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;launched_at&quot;</span>,
            <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;datetime&quot;</span>,
            <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;2014-12-28T22:36:27&quot;</span>
        }
    ]
}</code></pre>
<h2 id="list-event-types"><span class="header-section-number">1.3</span> List Event Types</h2>
<table>
<thead>
<tr class="header">
<th align="left">REST VERB</th>
<th align="left">URI</th>
<th align="left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">GET</td>
<td align="left">/v2/event_types</td>
<td align="left">查询记录的事件类型列表</td>
</tr>
</tbody>
</table>
<p>注意：Ceilometer支持的所有事件类型和此处的类型列表不是一个概念，这里显示的是系统上到现在为止记录的所有事件中，有哪些事件类型。</p>
<p>Ceilometer Juno默认有的事件类型有：</p>
<ul>
<li>compute.instance.*</li>
<li>compute.instance.exists</li>
</ul>
<p>通过修改/etc/ceilometer/event_definitions.yaml并重启ceilometer-agent-notification服务可以增加新的事件类型。</p>
<p>示例：为了方便举例，此处仅截取了响应体列表的若干个元素（删除虚拟机的动作导致的事件），且对该元素进行了json格式化，实际返回的是纯文本。</p>
<p>curl -i -X GET -H 'X-Auth-Token: 5f113ec0cb3249219d8e5300321c2282' -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'User-Agent: python-ceilometerclient' http://172.128.231.201:8777/v2/event_types/</p>
<pre class="sourceCode json"><code class="sourceCode json">[
    <span class="st">&quot;compute.instance.delete.end&quot;</span>,
    <span class="st">&quot;compute.instance.delete.start&quot;</span>,
    <span class="st">&quot;compute.instance.exists&quot;</span>,
    <span class="st">&quot;compute.instance.shutdown.end&quot;</span>,
    <span class="st">&quot;compute.instance.shutdown.start&quot;</span>,
    <span class="st">&quot;compute.instance.update&quot;</span>
]</code></pre>
<h2 id="list-traits-description"><span class="header-section-number">1.4</span> List Traits Description</h2>
<table>
<thead>
<tr class="header">
<th align="left">REST VERB</th>
<th align="left">URI</th>
<th align="left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">GET</td>
<td align="left">/v2/events_types/{event_type}/traits</td>
<td align="left">查询某事件类型的特征描述列表</td>
</tr>
</tbody>
</table>
<p>注意：如果event_type输入的是一个不存在的的类型，该接口不会报错，只会返回一个空列表。这是预期的行为。</p>
<p>示例：为了方便举例，对响应体进行了json格式化，实际返回的是纯文本。</p>
<p>curl -i -X GET -H 'X-Auth-Token: 1f9a3ec4845a49d8afa6faf48cd31300' -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'User-Agent: python-ceilometerclient' http://172.128.231.201:8777/v2/event_types/compute.instance.delete.start/traits</p>
<pre class="sourceCode json"><code class="sourceCode json">[
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;disk_gb&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>
    },
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;ephemeral_gb&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>
    },
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;host&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>
    },
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;instance_id&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>
    },
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;instance_type&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>
    },
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;instance_type_id&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>
    },
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;launched_at&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;datetime&quot;</span>
    },
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;memory_mb&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>
    },
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;request_id&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>
    },
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;root_gb&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>
    },
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;service&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>
    },
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;state&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>
    },
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;tenant_id&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>
    },
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;user_id&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;string&quot;</span>
    },
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;vcpus&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>
    }
]</code></pre>
<h2 id="list-traits"><span class="header-section-number">1.5</span> List Traits</h2>
<table>
<thead>
<tr class="header">
<th align="left">REST VERB</th>
<th align="left">URI</th>
<th align="left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">GET</td>
<td align="left">/v2/events_types/{event_type}/traits/{trait_name}</td>
<td align="left">查询某事件类型的某特征列表</td>
</tr>
</tbody>
</table>
<p>注意：如果event_type输入的是一个不存在的的类型，该接口不会报错，只会返回一个空列表。如果trait_name输入的是不存在的特征，该接口不会报错，只会返回一个空列表。这是预期的行为。</p>
<p>示例：为了方便举例，对响应体进行了json格式化，实际返回的是纯文本。</p>
<p>curl -i -X GET -H 'X-Auth-Token: 1f9a3ec4845a49d8afa6faf48cd31300' -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'User-Agent: python-ceilometerclient' http://172.128.231.201:8777/v2/event_types/compute.instance.delete.start/traits/vcpus</p>
<pre class="sourceCode json"><code class="sourceCode json">[
    {
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;vcpus&quot;</span>,
        <span class="dt">&quot;type&quot;</span>: <span class="st">&quot;integer&quot;</span>,
        <span class="dt">&quot;value&quot;</span>: <span class="st">&quot;1&quot;</span>
    }
]</code></pre>
<h1 id="capabilities"><span class="header-section-number">2</span> Capabilities</h1>
<h2 id="get-capabilities"><span class="header-section-number">2.1</span> Get Capabilities</h2>
<table>
<thead>
<tr class="header">
<th align="left">REST VERB</th>
<th align="left">URI</th>
<th align="left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">GET</td>
<td align="left">/v2/capabilities</td>
<td align="left">查询能力列表（查询当前版本的能力，例如分页查询是否支持等。）</td>
</tr>
</tbody>
</table>
<p>curl -i -X GET -H 'User-Agent: python-ceilometerclient' -H 'Content-Type: application/json' -H &quot;X-Auth-Token: $(keystone token-get | awk 'NR==5{print $4}')&quot; -k &quot;https://metering.localdomain.com:8777/v2/capabilities&quot;</p>
<pre class="sourceCode json"><code class="sourceCode json">{
    <span class="dt">&quot;alarm_storage&quot;</span>: {
        <span class="dt">&quot;storage:production_ready&quot;</span>: <span class="dv">true</span>
    },
    <span class="dt">&quot;api&quot;</span>: {
        <span class="dt">&quot;alarms:history:query:complex&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;alarms:history:query:simple&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;alarms:query:complex&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;alarms:query:simple&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;events:query:simple&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;meters:pagination&quot;</span>: <span class="dv">false</span>,
        <span class="dt">&quot;meters:query:complex&quot;</span>: <span class="dv">false</span>,
        <span class="dt">&quot;meters:query:metadata&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;meters:query:simple&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;resources:pagination&quot;</span>: <span class="dv">false</span>,
        <span class="dt">&quot;resources:query:complex&quot;</span>: <span class="dv">false</span>,
        <span class="dt">&quot;resources:query:metadata&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;resources:query:simple&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;samples:groupby&quot;</span>: <span class="dv">false</span>,
        <span class="dt">&quot;samples:pagination&quot;</span>: <span class="dv">false</span>,
        <span class="dt">&quot;samples:query:complex&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;samples:query:metadata&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;samples:query:simple&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;statistics:aggregation:selectable:avg&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;statistics:aggregation:selectable:cardinality&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;statistics:aggregation:selectable:count&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;statistics:aggregation:selectable:max&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;statistics:aggregation:selectable:min&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;statistics:aggregation:selectable:stddev&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;statistics:aggregation:selectable:sum&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;statistics:aggregation:standard&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;statistics:groupby&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;statistics:pagination&quot;</span>: <span class="dv">false</span>,
        <span class="dt">&quot;statistics:query:complex&quot;</span>: <span class="dv">false</span>,
        <span class="dt">&quot;statistics:query:metadata&quot;</span>: <span class="dv">true</span>,
        <span class="dt">&quot;statistics:query:simple&quot;</span>: <span class="dv">true</span>
    },
    <span class="dt">&quot;storage&quot;</span>: {
        <span class="dt">&quot;storage:production_ready&quot;</span>: <span class="dv">true</span>
    }
}</code></pre>
<h1 id="resource"><span class="header-section-number">3</span> Resource</h1>
<h2 id="list-resources"><span class="header-section-number">3.1</span> List Resources</h2>
<table>
<thead>
<tr class="header">
<th align="left">REST VERB</th>
<th align="left">URI</th>
<th align="left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">GET</td>
<td align="left">/v2/resources?meter_links=1&amp;q.op={operator}&amp;q.value={value}&amp;q.field={field}</td>
<td align="left">List Resources</td>
</tr>
</tbody>
</table>
<p>valid keys: ['end_timestamp', 'end_timestamp_op', 'metaquery', 'pagination', 'project', 'resource', 'source', 'start_timestamp', 'start_timestamp_op', 'user']</p>
<p>curl -i -X GET -H 'User-Agent: python-ceilometerclient' -H 'Content-Type: application/json' -H &quot;X-Auth-Token: $(keystone token-get | awk 'NR==5{print $4}')&quot; -k &quot;https://metering.localdomain.com:8777/v2/resources?meter_links=1&quot;</p>
<pre class="sourceCode json"><code class="sourceCode json">[
    {
        <span class="dt">&quot;first_sample_timestamp&quot;</span>: <span class="st">&quot;2014-12-04T03:10:42.402000&quot;</span>,
        <span class="dt">&quot;last_sample_timestamp&quot;</span>: <span class="st">&quot;2014-12-15T00:16:40&quot;</span>,
        <span class="dt">&quot;links&quot;</span>: [
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/resources/8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;self&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/vcpus?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;vcpus&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/instance:m1.tiny?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;instance:m1.tiny&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/instance?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;instance&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/memory?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;memory&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/disk.ephemeral.size?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;disk.ephemeral.size&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/disk.root.size?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;disk.root.size&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/disk.read.bytes?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;disk.read.bytes&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/disk.read.requests?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;disk.read.requests&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/disk.write.requests?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;disk.write.requests&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/disk.write.bytes?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;disk.write.bytes&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/cpu?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;cpu&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/cpu_util?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;cpu_util&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/disk.read.bytes.rate?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;disk.read.bytes.rate&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/disk.read.requests.rate?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;disk.read.requests.rate&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/disk.write.requests.rate?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;disk.write.requests.rate&quot;</span>
            },
            {
                <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/disk.write.bytes.rate?q.field=resource_id&amp;q.value=8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
                <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;disk.write.bytes.rate&quot;</span>
            }
        ],
        <span class="dt">&quot;metadata&quot;</span>: {
            <span class="dt">&quot;OS-EXT-AZ.availability_zone&quot;</span>: <span class="st">&quot;az1.dc1&quot;</span>,
            <span class="dt">&quot;device&quot;</span>: <span class="st">&quot;[vda]&quot;</span>,
            <span class="dt">&quot;disk_gb&quot;</span>: <span class="st">&quot;1&quot;</span>,
            <span class="dt">&quot;display_name&quot;</span>: <span class="st">&quot;as-ASG-gpcheb3tt5yk-uvcdt75k7vfi-ngi72lsbd7ji&quot;</span>,
            <span class="dt">&quot;ephemeral_gb&quot;</span>: <span class="st">&quot;0&quot;</span>,
            <span class="dt">&quot;flavor.disk&quot;</span>: <span class="st">&quot;1&quot;</span>,
            <span class="dt">&quot;flavor.ephemeral&quot;</span>: <span class="st">&quot;0&quot;</span>,
            <span class="dt">&quot;flavor.id&quot;</span>: <span class="st">&quot;1&quot;</span>,
            <span class="dt">&quot;flavor.links&quot;</span>: <span class="st">&quot;[\&quot;{uhref: uhttps://compute.localdomain.com:8001/13b4b5694ebb49c9a927c0ffd3ba28cb/flavors/1, urel: ubookmark}\&quot;]&quot;</span>,
            <span class="dt">&quot;flavor.name&quot;</span>: <span class="st">&quot;m1.tiny&quot;</span>,
            <span class="dt">&quot;flavor.ram&quot;</span>: <span class="st">&quot;512&quot;</span>,
            <span class="dt">&quot;flavor.vcpus&quot;</span>: <span class="st">&quot;1&quot;</span>,
            <span class="dt">&quot;host&quot;</span>: <span class="st">&quot;2e00e1525a23119869d5ed01605a2828479d22844052fdbb2f60925c&quot;</span>,
            <span class="dt">&quot;image.id&quot;</span>: <span class="st">&quot;2ff58fab-ee6c-40ee-90b7-299452ef5b92&quot;</span>,
            <span class="dt">&quot;image.links&quot;</span>: <span class="st">&quot;[\&quot;{uhref: uhttps://compute.localdomain.com:8001/13b4b5694ebb49c9a927c0ffd3ba28cb/images/2ff58fab-ee6c-40ee-90b7-299452ef5b92, urel: ubookmark}\&quot;]&quot;</span>,
            <span class="dt">&quot;image.name&quot;</span>: <span class="st">&quot;myImage&quot;</span>,
            <span class="dt">&quot;image_ref&quot;</span>: <span class="st">&quot;2ff58fab-ee6c-40ee-90b7-299452ef5b92&quot;</span>,
            <span class="dt">&quot;image_ref_url&quot;</span>: <span class="st">&quot;https://compute.localdomain.com:8001/13b4b5694ebb49c9a927c0ffd3ba28cb/images/2ff58fab-ee6c-40ee-90b7-299452ef5b92&quot;</span>,
            <span class="dt">&quot;instance_type&quot;</span>: <span class="st">&quot;1&quot;</span>,
            <span class="dt">&quot;kernel_id&quot;</span>: <span class="st">&quot;None&quot;</span>,
            <span class="dt">&quot;memory_mb&quot;</span>: <span class="st">&quot;512&quot;</span>,
            <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;instance-00000002&quot;</span>,
            <span class="dt">&quot;ramdisk_id&quot;</span>: <span class="st">&quot;None&quot;</span>,
            <span class="dt">&quot;root_gb&quot;</span>: <span class="st">&quot;1&quot;</span>,
            <span class="dt">&quot;status&quot;</span>: <span class="st">&quot;active&quot;</span>,
            <span class="dt">&quot;user_metadata.AutoScalingGroupName&quot;</span>: <span class="st">&quot;as-ASG-gpcheb3tt5yk&quot;</span>,
            <span class="dt">&quot;user_metadata.groupname&quot;</span>: <span class="st">&quot;as-ASG-gpcheb3tt5yk&quot;</span>,
            <span class="dt">&quot;vcpus&quot;</span>: <span class="st">&quot;1&quot;</span>
        },
        <span class="dt">&quot;project_id&quot;</span>: <span class="st">&quot;104beede98164e5e894eb79bf685c584&quot;</span>,
        <span class="dt">&quot;resource_id&quot;</span>: <span class="st">&quot;8813ac84-d01d-4c97-ad31-4f04cf128f9b&quot;</span>,
        <span class="dt">&quot;source&quot;</span>: <span class="st">&quot;openstack&quot;</span>,
        <span class="dt">&quot;user_id&quot;</span>: <span class="st">&quot;db3b71f5e5f346d9b4d53a55a10a33f9&quot;</span>
    }
]</code></pre>
<h2 id="get-resource"><span class="header-section-number">3.2</span> Get Resource</h2>
<table>
<thead>
<tr class="header">
<th align="left">REST VERB</th>
<th align="left">URI</th>
<th align="left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">GET</td>
<td align="left">/v2/resources/{resource_id}</td>
<td align="left">Get resource detailed information</td>
</tr>
</tbody>
</table>
<p>curl -i -X GET -H 'User-Agent: python-ceilometerclient' -H 'Content-Type: application/json' -H &quot;X-Auth-Token: $(keystone token-get | awk 'NR==5{print $4}')&quot; -k &quot;https://metering.localdomain.com:8777/v2/resources/2ff58fab-ee6c-40ee-90b7-299452ef5b92&quot;</p>
<pre class="sourceCode json"><code class="sourceCode json">{
    <span class="dt">&quot;first_sample_timestamp&quot;</span>: <span class="st">&quot;2014-12-04T02:27:59&quot;</span>,
    <span class="dt">&quot;last_sample_timestamp&quot;</span>: <span class="st">&quot;2014-12-15T00:22:08&quot;</span>,
    <span class="dt">&quot;links&quot;</span>: [
        {
            <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/resources/2ff58fab-ee6c-40ee-90b7-299452ef5b92&quot;</span>,
            <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;self&quot;</span>
        },
        {
            <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/image?q.field=resource_id&amp;q.value=2ff58fab-ee6c-40ee-90b7-299452ef5b92&quot;</span>,
            <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;image&quot;</span>
        },
        {
            <span class="dt">&quot;href&quot;</span>: <span class="st">&quot;https://metering.localdomain.com:8777/v2/meters/image.size?q.field=resource_id&amp;q.value=2ff58fab-ee6c-40ee-90b7-299452ef5b92&quot;</span>,
            <span class="dt">&quot;rel&quot;</span>: <span class="st">&quot;image.size&quot;</span>
        }
    ],
    <span class="dt">&quot;metadata&quot;</span>: {
        <span class="dt">&quot;checksum&quot;</span>: <span class="st">&quot;d972013792949d0d3ba628fbe8685bce&quot;</span>,
        <span class="dt">&quot;container_format&quot;</span>: <span class="st">&quot;bare&quot;</span>,
        <span class="dt">&quot;created_at&quot;</span>: <span class="st">&quot;2014-12-04T02:27:51.843400&quot;</span>,
        <span class="dt">&quot;deleted&quot;</span>: <span class="st">&quot;False&quot;</span>,
        <span class="dt">&quot;deleted_at&quot;</span>: <span class="st">&quot;None&quot;</span>,
        <span class="dt">&quot;disk_format&quot;</span>: <span class="st">&quot;qcow2&quot;</span>,
        <span class="dt">&quot;is_public&quot;</span>: <span class="st">&quot;True&quot;</span>,
        <span class="dt">&quot;min_disk&quot;</span>: <span class="st">&quot;0&quot;</span>,
        <span class="dt">&quot;min_ram&quot;</span>: <span class="st">&quot;0&quot;</span>,
        <span class="dt">&quot;name&quot;</span>: <span class="st">&quot;myImage&quot;</span>,
        <span class="dt">&quot;protected&quot;</span>: <span class="st">&quot;False&quot;</span>,
        <span class="dt">&quot;size&quot;</span>: <span class="st">&quot;13147648&quot;</span>,
        <span class="dt">&quot;status&quot;</span>: <span class="st">&quot;active&quot;</span>,
        <span class="dt">&quot;updated_at&quot;</span>: <span class="st">&quot;2014-12-04T02:27:53.914783&quot;</span>
    },
    <span class="dt">&quot;project_id&quot;</span>: <span class="st">&quot;104beede98164e5e894eb79bf685c584&quot;</span>,
    <span class="dt">&quot;resource_id&quot;</span>: <span class="st">&quot;2ff58fab-ee6c-40ee-90b7-299452ef5b92&quot;</span>,
    <span class="dt">&quot;source&quot;</span>: <span class="st">&quot;openstack&quot;</span>,
    <span class="dt">&quot;user_id&quot;</span>: <span class="dv">null</span>
}</code></pre>
<h1 id="alarm"><span class="header-section-number">4</span> Alarm</h1>
<h2 id="alarm-model"><span class="header-section-number">4.1</span> Alarm Model</h2>
<table>
<thead>
<tr class="header">
<th align="left">属性</th>
<th align="left">类型</th>
<th align="left">CRUD</th>
<th align="left">默认值</th>
<th align="left">约束</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">alarm_id</td>
<td align="left">string</td>
<td align="left">r</td>
<td align="left">N/A</td>
<td align="left">N/A</td>
<td align="left">uuid</td>
</tr>
<tr class="even">
<td align="left">type</td>
<td align="left">string</td>
<td align="left">crw</td>
<td align="left">N/A</td>
<td align="left">N/A</td>
<td align="left">类型，取值为threshold或combination</td>
</tr>
<tr class="odd">
<td align="left">name</td>
<td align="left">string</td>
<td align="left">crw</td>
<td align="left">N/A</td>
<td align="left">N/A</td>
<td align="left">名称，项目内唯一</td>
</tr>
<tr class="even">
<td align="left">description</td>
<td align="left">string</td>
<td align="left">crw</td>
<td align="left">有</td>
<td align="left">N/A</td>
<td align="left">描述，默认值根据类型而不同</td>
</tr>
<tr class="odd">
<td align="left">enabled</td>
<td align="left">bool</td>
<td align="left">crw</td>
<td align="left">N/A</td>
<td align="left">N/A</td>
<td align="left">是否可用</td>
</tr>
<tr class="even">
<td align="left">state</td>
<td align="left">string</td>
<td align="left">crw</td>
<td align="left">N/A</td>
<td align="left">见state取值表</td>
<td align="left">状态，取值为ok/alarm/insufficient data</td>
</tr>
<tr class="odd">
<td align="left">threshold_rule</td>
<td align="left">object</td>
<td align="left">crw</td>
<td align="left">N/A</td>
<td align="left">json dict</td>
<td align="left">条件，满足条件即触发alarm</td>
</tr>
<tr class="even">
<td align="left">combination_rule</td>
<td align="left">object</td>
<td align="left">crw</td>
<td align="left">N/A</td>
<td align="left">json dict</td>
<td align="left">条件，满足条件即触发alarm</td>
</tr>
<tr class="odd">
<td align="left">user_id</td>
<td align="left">string</td>
<td align="left">crw</td>
<td align="left">N/A</td>
<td align="left">N/A</td>
<td align="left">用户id</td>
</tr>
<tr class="even">
<td align="left">project_id</td>
<td align="left">string</td>
<td align="left">crw</td>
<td align="left">N/A</td>
<td align="left">N/A</td>
<td align="left">项目id</td>
</tr>
<tr class="odd">
<td align="left">evaluation_periods</td>
<td align="left">string</td>
<td align="left">crw</td>
<td align="left">N/A</td>
<td align="left">N/A</td>
<td align="left">时间窗口数量</td>
</tr>
<tr class="even">
<td align="left">period</td>
<td align="left">int</td>
<td align="left">crw</td>
<td align="left">N/A</td>
<td align="left">非负数</td>
<td align="left">时间窗口，单位秒</td>
</tr>
<tr class="odd">
<td align="left">timestamp</td>
<td align="left">string</td>
<td align="left">r</td>
<td align="left">N/A</td>
<td align="left">datetime</td>
<td align="left">最后一次更新的时间戳</td>
</tr>
<tr class="even">
<td align="left">state_timestamp</td>
<td align="left">string</td>
<td align="left">r</td>
<td align="left">N/A</td>
<td align="left">datetime</td>
<td align="left">最后一次状态更新的时间戳</td>
</tr>
<tr class="odd">
<td align="left">ok_actions</td>
<td align="left">list</td>
<td align="left">crw</td>
<td align="left">N/A</td>
<td align="left">N/A</td>
<td align="left">alarm状态跃迁为ok时执行的动作</td>
</tr>
<tr class="even">
<td align="left">alarm_actions</td>
<td align="left">list</td>
<td align="left">crw</td>
<td align="left">N/A</td>
<td align="left">N/A</td>
<td align="left">alarm状态跃迁为alarm时执行的动作</td>
</tr>
<tr class="odd">
<td align="left">insufficient_data_actions</td>
<td align="left">list</td>
<td align="left">crw</td>
<td align="left">N/A</td>
<td align="left">N/A</td>
<td align="left">alarm状态跃迁为insufficient data时执行的动作</td>
</tr>
<tr class="even">
<td align="left">repeat_actions</td>
<td align="left">bool</td>
<td align="left">crw</td>
<td align="left">N/A</td>
<td align="left">N/A</td>
<td align="left">是否重复执行动作</td>
</tr>
<tr class="odd">
<td align="left">time_constraints</td>
<td align="left">list</td>
<td align="left"></td>
<td align="left">[]</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<h3 id="alarmthresholdrule-model"><span class="header-section-number">4.1.1</span> AlarmThresholdRule Model</h3>
<table>
<thead>
<tr class="header">
<th align="left">Attribute</th>
<th align="left">Type</th>
<th align="left">Default</th>
<th align="left">Remark</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">meter_name</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">required</td>
</tr>
<tr class="even">
<td align="left">query</td>
<td align="left">list</td>
<td align="left">[]</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">period</td>
<td align="left">int</td>
<td align="left">60</td>
<td align="left">&gt;=1</td>
</tr>
<tr class="even">
<td align="left">comparison_operator</td>
<td align="left">string</td>
<td align="left">eq</td>
<td align="left">'lt', 'le', 'eq', 'ne', 'ge', 'gt'</td>
</tr>
<tr class="odd">
<td align="left">threshold</td>
<td align="left">float</td>
<td align="left"></td>
<td align="left">required</td>
</tr>
<tr class="even">
<td align="left">statistic</td>
<td align="left">string</td>
<td align="left">avg</td>
<td align="left">'max', 'min', 'avg', 'sum', 'count'</td>
</tr>
<tr class="odd">
<td align="left">evaluation_periods</td>
<td align="left">int</td>
<td align="left">1</td>
<td align="left">&gt;=1</td>
</tr>
<tr class="even">
<td align="left">exclude_outliers</td>
<td align="left">bool</td>
<td align="left">False</td>
</tr>
</tbody>
</table>
<p>exclude_outliers为真则会排除在标准差范围外的指标</p>
<h3 id="alarmcombinationrule-model"><span class="header-section-number">4.1.2</span> AlarmCombinationRule Model</h3>
<table>
<thead>
<tr class="header">
<th align="left">Attribute</th>
<th align="left">Type</th>
<th align="left">Default</th>
<th align="left">Remark</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">operator</td>
<td align="left">str</td>
<td align="left">and</td>
<td align="left">'or', 'and'</td>
</tr>
<tr class="even">
<td align="left">alarm_ids</td>
<td align="left">list</td>
<td align="left"></td>
<td align="left">required</td>
</tr>
</tbody>
</table>
<h3 id="alarmtimeconstraint"><span class="header-section-number">4.1.3</span> AlarmTimeConstraint</h3>
<table>
<thead>
<tr class="header">
<th align="left">Attribute</th>
<th align="left">Type</th>
<th align="left">Default</th>
<th align="left">Remark</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">name</td>
<td align="left">str</td>
<td align="left"></td>
<td align="left">required</td>
</tr>
<tr class="even">
<td align="left">description</td>
<td align="left">str</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">start</td>
<td align="left">CronType</td>
<td align="left"></td>
<td align="left">required</td>
</tr>
<tr class="even">
<td align="left">duration</td>
<td align="left">int</td>
<td align="left"></td>
<td align="left">&gt;=0, required</td>
</tr>
<tr class="odd">
<td align="left">timezone</td>
<td align="left">str</td>
<td align="left">&quot;&quot;</td>
</tr>
</tbody>
</table>
<h2 id="create-alarm"><span class="header-section-number">4.2</span> Create Alarm</h2>
<h2 id="list-alarms"><span class="header-section-number">4.3</span> List Alarms</h2>
<table>
<thead>
<tr class="header">
<th align="left">REST VERB</th>
<th align="left">URI</th>
<th align="left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">GET</td>
<td align="left">/v2/alarms?q.op=eq&amp;q.value={value}&amp;q.field={field}</td>
<td align="left">List alarms</td>
</tr>
</tbody>
</table>
<p>valid keys: ['alarm_id', 'enabled', 'meter', 'name', 'pagination', 'project', 'state', 'type', 'user']</p>
<p>curl -i -X GET -H 'User-Agent: python-ceilometerclient' -H 'Content-Type: application/json' -H &quot;X-Auth-Token: $(keystone token-get | awk 'NR==5{print $4}')&quot; -k &quot;https://metering.localdomain.com:8777/v2/alarms&quot;</p>
<pre class="sourceCode json"><code class="sourceCode json"></code></pre>
<h2 id="get-alarm"><span class="header-section-number">4.4</span> Get Alarm</h2>
<table>
<thead>
<tr class="header">
<th align="left">REST VERB</th>
<th align="left">URI</th>
<th align="left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">GET</td>
<td align="left">/v2/alarms/{alarm_id}</td>
<td align="left">Get alarm detailed information</td>
</tr>
</tbody>
</table>
<script type="text/javascript" src="../jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="../jquery-ui-1.10.4.min.js"></script>
<script type="text/javascript" src="../jquery.xlstablefilter-1.0.1.min.js"></script>
<script type="text/javascript">
  $(document).ready(function () {
    $("table").xlsTableFilter();
    $('table tr').hover(function () {
      $(this).find('td').addClass('hover');
    }, function () {
      $(this).find('td').removeClass('hover');
    });
  });
</script>
</body>
</html>
